---
import Social from "@components/common/Social.astro";
---

<footer
  class="glass container lg:my-4 lg:rounded-lg intersect:animate-fadeUp opacity-0"
>
  <div class="row py-2 lg:py-0 items-center flex-wrap-reverse">
    <div class="text-center lg:col-6 lg:mb-0 lg:text-left">
      <ul class="space-y-1">
        <li class="m-2 inline-block">
          <a href="/terms">&copy; Frickeldave 2025</a>
        </li>
        <li class="m-2 inline-block">
          <a href="/impressum">Impressum</a>
        </li>
        <li class="m-2 inline-block">
          <a href="/datenschutz">Datenschutz</a>
        </li>
        <li class="m-2 inline-block">
          <span
            id="footer-version"
            class="text-xs text-gray-900 dark:text-gray-400"
          >
            <!-- Version wird client-side geladen -->
          </span>
        </li>
      </ul>
    </div>
    <div
      class="text-center lg:col-6 lg:my-0 flex items-center justify-center lg:justify-end"
    >
      <Social
        links={{
          github: "https://github.com/frickeldave",
          instagram: "https://www.instagram.com/frickeldave.de",
          linkedIn: "https://www.linkedin.com/in/frickeldave",
        }}
      />
    </div>
  </div>
</footer>

<script>
  // Load version info into footer
  async function loadFooterVersion() {
    try {
      const response = await fetch("/version.json");
      const versionInfo = await response.json();

      const footerVersion = document.getElementById("footer-version");
      if (!footerVersion) return;

      const buildDate = new Date(versionInfo.buildTime).toLocaleString(
        "de-DE",
        {
          day: "2-digit",
          month: "2-digit",
          year: "numeric",
          hour: "2-digit",
          minute: "2-digit",
        }
      );

      footerVersion.textContent = `${versionInfo.version} | Built: ${buildDate}`;
    } catch (error) {
      console.warn("Could not load version info for footer:", error);
    }
  }

  // Load on page load
  loadFooterVersion();

  // Reload on view transitions
  document.addEventListener("astro:page-load", loadFooterVersion);
</script>
