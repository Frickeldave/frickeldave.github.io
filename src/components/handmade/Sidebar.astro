---
import { ScrollArea } from "@components/common/shortcodes/ScrollArea";
import { FaFilter, FaSort, FaHashtag } from "react-icons/fa";

interface Props {
  categories: string[];
  allTags: string[];
  totalProducts: number;
}

const { categories, allTags, totalProducts } = Astro.props;
---

<ScrollArea className="h-full" client:only="react">
  <!-- Results Count -->
  <div
    class="glass rounded-lg p-4 m-2 mb-4 intersect:animate-fadeLeft opacity-0"
  >
    <div class="text-sm opacity-80" id="results-count">
      {totalProducts} von {totalProducts} Produkten
    </div>
  </div>

  <!-- Search -->
  <div
    class="glass rounded-lg p-4 m-2 mb-4 intersect:animate-fadeLeft opacity-0"
  >
    <div>
      <h4 class="mb-2">
        <FaFilter className={"mr-1 -mt-1.5 inline-block"} />
         Suche
      </h4>
      <hr class="mb-2 -mt-1" />
      <input
        type="text"
        id="search-input"
        placeholder="Suche nach Produkten..."
        class="w-full px-3 py-2 rounded-lg bg-white/10 border border-white/20 focus:border-white/40 focus:outline-none transition-colors text-sm"
      />
    </div>
  </div>

  <!-- Categories -->
  <div
    class="glass rounded-lg p-4 m-2 mb-4 intersect:animate-fadeLeft opacity-0"
  >
    <div>
      <h4 class="mb-2">
        <FaFilter className={"mr-1 -mt-1.5 inline-block"} />
         Kategorie
      </h4>
      <hr class="mb-2 -mt-1" />
      <ul class="space-y-2" id="category-filters">
        {
          categories.map((category) => (
            <li>
              <button
                class="category-filter w-full text-left px-3 py-1.5 rounded-lg bg-white/10 hover:bg-white/25 border border-white/20 hover:border-white/40 transition-all text-sm"
                data-category={category}
              >
                {category}
              </button>
            </li>
          ))
        }
      </ul>
    </div>
  </div>

  <!-- Tags -->
  <div
    class="glass rounded-lg p-4 m-2 mb-4 intersect:animate-fadeLeft opacity-0"
  >
    <div>
      <h4 class="mb-2">
        <FaHashtag className={"mr-1 -mt-1.5 inline-block"} />
         Tags
      </h4>
      <hr class="mb-2 -mt-1" />
      <div class="flex flex-wrap gap-2" id="tag-filters">
        {
          allTags.map((tag) => (
            <button
              class="tag-filter px-2 py-1 rounded-lg text-xs bg-white/10 hover:bg-white/25 border border-white/20 hover:border-white/40 transition-all"
              data-tag={tag}
            >
              {tag}
            </button>
          ))
        }
      </div>
    </div>
  </div>

  <!-- Customizable Filter -->
  <div
    class="glass rounded-lg p-4 m-2 mb-4 intersect:animate-fadeLeft opacity-0"
  >
    <div>
      <h4 class="mb-2">
        <FaFilter className={"mr-1 -mt-1.5 inline-block"} />
         Eigenschaften
      </h4>
      <hr class="mb-2 -mt-1" />
      <label class="flex items-center gap-2 cursor-pointer">
        <input
          type="checkbox"
          id="customizable-filter"
          class="w-4 h-4 rounded border-white/20 bg-white/10 checked:bg-blue-500 focus:ring-2 focus:ring-blue-400 cursor-pointer"
        />
        <span class="text-sm flex items-center gap-1">
          <span class="text-base">✨</span>
           Nur Personalisierbare
        </span>
      </label>
    </div>
  </div>

  <!-- Sort -->
  <div
    class="glass rounded-lg p-4 m-2 mb-4 intersect:animate-fadeLeft opacity-0"
  >
    <div>
      <h4 class="mb-2">
        <FaSort className={"mr-1 -mt-1.5 inline-block"} />
         Sortierung
      </h4>
      <hr class="mb-2 -mt-1" />
      <select
        id="sort-select"
        class="w-full px-3 py-2 rounded-lg bg-white/10 border border-white/20 focus:border-white/40 focus:outline-none transition-colors text-sm dark:bg-gray-800 dark:text-white dark:[&>option]:bg-gray-800 dark:[&>option]:text-white"
      >
        <option value="name-asc">Name (A-Z)</option>
        <option value="name-desc">Name (Z-A)</option>
        <option value="price-asc">Preis (aufsteigend)</option>
        <option value="price-desc">Preis (absteigend)</option>
      </select>
    </div>
  </div>

  <!-- Clear Filters -->
  <div class="glass rounded-lg p-4 m-2 intersect:animate-fadeLeft opacity-0">
    <button
      id="clear-filters"
      class="w-full px-3 py-2 rounded-lg glass-subtle hover:bg-white/20 transition-all text-sm"
    >
      Filter zurücksetzen
    </button>
  </div>
</ScrollArea>
