---
const links = [
  { href: "/aboutme", text: "Ãœbersicht" },
  { href: "/aboutme/doag", text: "DOAG & Podcast" },
  { href: "/aboutme/publications", text: "Publikationen" },
  { href: "/aboutme/experience", text: "Erfahrungen" },
  { href: "/aboutme/talks", text: "Talks" },
  { href: "/aboutme/projects", text: "Projekte" },
];

// ... props ...
export interface TocItem {
  text: string;
  slug: string;
  depth?: number;
}

interface Props {
  currentPath?: string;
  toc?: TocItem[];
}

const { currentPath = Astro.url.pathname, toc } = Astro.props;
---

<nav class="space-y-6">
  <div class="glass rounded-lg p-4">
    <h3 class="text-txt-h dark:text-darkmode-txt-h mb-3 text-lg font-bold">
      Bereiche
    </h3>
    <ul class="space-y-2">
      {
        links.map(({ href, text }) => (
          <li>
            <a
              href={href}
              class:list={[
                "glass-t block w-full rounded-lg px-3 py-1.5 text-left text-sm transition-all",
                currentPath === href ||
                (href !== "/aboutme" && currentPath.startsWith(href))
                  ? "bg-amber-500/30 text-txt-h dark:text-darkmode-txt-h border-amber-500/50 shadow-sm"
                  : "text-txt-p hover:bg-amber-500/20 dark:text-darkmode-txt-p",
              ]}
            >
              {text}
            </a>
          </li>
        ))
      }
    </ul>
  </div>

  {
    toc && toc.length > 0 && (
      <div class="glass rounded-lg p-4">
        <h3 class="text-txt-h dark:text-darkmode-txt-h mb-3 text-lg font-bold">
          Auf dieser Seite
        </h3>
        <ul class="space-y-2">
          {toc.map((item) => (
            <li class:list={[item.depth && item.depth > 2 && "pl-4"]}>
              <a
                href={`#${item.slug}`}
                class="glass-t block w-full rounded-lg px-3 py-1.5 text-left text-sm transition-all hover:bg-amber-500/20 text-txt-p dark:text-darkmode-txt-p"
              >
                {item.text}
              </a>
            </li>
          ))}
        </ul>
      </div>
    )
  }

  <slot />
</nav>
